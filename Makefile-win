NAME = guimp
SRCS = \
	main.c \
	events.c \
	brush_modifier_events.c \
	layer.c \
	layer_element.c \
	layer_element_help.c \
	help.c \
	floodfill.c \
	brushes.c \
	brushes2.c \
	brushes3.c \

CDIR = srcs
ODIR = obj
OBJS = $(addprefix $(ODIR)/, $(SRCS:.c=.o))
JOHNNY = $(OBJS:.o=.d)

SDL_DIR		:= ./libs/SDL_WIN
SDL_INC		:= -I$(SDL_DIR)/include
SDL_LIB_DIR	:= -L$(SDL_DIR)/lib
SDL_LIB		:= -lSDL2 -lSDL2_ttf -lSDL2_image

LIB_FOLDER = ./libs

INCLUDES = \
	-I. \
	-I$(LIB_FOLDER)/libft \
	-I$(LIB_FOLDER)/libpf \
	-I$(LIB_FOLDER)/libui \
	-I$(LIB_FOLDER)/liblg \
	$(SDL_INC) \

LIB_FOLDERS = \
	-L$(LIB_FOLDER)/libft \
	-L$(LIB_FOLDER)/libpf \
	-L$(LIB_FOLDER)/libui \
	-L$(LIB_FOLDER)/liblg \
	$(SDL_LIB_DIR) \

LIB = $(SDL_LIB) -lui -lpf -lft -llg

FLAGS = -Wall -Wextra

all: $(ODIR) $(NAME)

-include $(JOHNNY)

$(ODIR):
	@mkdir -p $@

$(ODIR)/%.o: $(CDIR)/%.c
	@gcc -c $< -o $@ -MMD -O3 \
		$(INCLUDES) $(LIB_FOLDERS) $(LIB) $(FLAGS)
	@printf $(YELLOW)"\e[F\e[JCompiling $<\n"$(RESET)

$(NAME): $(OBJS)
	@gcc -o $(NAME) $(OBJS) $(INCLUDES) $(LIB_FOLDERS) $(LIB) $(FLAGS)
	@echo "$(NAME) was successfully created."

clean:
	@rm -rf $(ODIR)
	@echo "$(NAME) was cleaned."

fclean: clean
	@rm -f $(NAME)
	@echo "$(NAME) was fcleaned."

re: fclean all

.PHONY: clean, all, re, fclean
